# æ—¥å¿—ç³»ç»Ÿè¯´æ˜

## æ—¥å¿—çº§åˆ«

- **error**: é”™è¯¯ï¼Œéœ€è¦ç«‹å³å…³æ³¨
- **warn**: è­¦å‘Šï¼Œå¯èƒ½å½±å“åŠŸèƒ½
- **info**: é‡è¦ä¿¡æ¯ï¼Œå…³é”®æ“ä½œè®°å½•
- **debug**: è°ƒè¯•ä¿¡æ¯ï¼Œè¯¦ç»†çš„æ‰§è¡Œæµç¨‹

## æ—¥å¿—é…ç½®

### å¼€å‘æ¨¡å¼
- æ–‡ä»¶æ—¥å¿—: `debug` çº§åˆ«
- æ§åˆ¶å°æ—¥å¿—: `debug` çº§åˆ«

### ç”Ÿäº§æ¨¡å¼
- æ–‡ä»¶æ—¥å¿—: `info` çº§åˆ«  
- æ§åˆ¶å°æ—¥å¿—: `warn` çº§åˆ«

## æ—¥å¿—æ–‡ä»¶ä½ç½®

### macOS
```
~/Library/Logs/SundaySchoolTime/main-YYYY-MM-DD.log
```

### Windows
```
%USERPROFILE%\AppData\Roaming\SundaySchoolTime\logs\main-YYYY-MM-DD.log
```

### Linux
```
~/.config/SundaySchoolTime/logs/main-YYYY-MM-DD.log
```

## æ—¥å¿—è½®è½¬

- æŒ‰å¤©è½®è½¬ï¼ˆæ–‡ä»¶ååŒ…å«æ—¥æœŸï¼‰
- å•æ–‡ä»¶æœ€å¤§ 10MB
- è‡ªåŠ¨åˆ›å»ºæ–°æ–‡ä»¶

## æ—¥å¿—å†…å®¹

### åº”ç”¨å¯åŠ¨
```
[2026-01-17 10:29:30.123] [info] Application Starting
[2026-01-17 10:29:30.124] [info] Environment: development
[2026-01-17 10:29:30.125] [info] Platform: darwin
[2026-01-17 10:29:30.126] [info] App version: 1.0.0
```

### çª—å£åˆ›å»º
```
[2026-01-17 10:29:31.001] [info] ------- Creating Main Window -------
[2026-01-17 10:29:31.002] [debug] User preferences loaded: {...}
[2026-01-17 10:29:31.003] [info] BrowserWindow instance created
[2026-01-17 10:29:31.004] [info] Application menu created successfully
```

### é”™è¯¯è®°å½•
```
[2026-01-17 10:29:32.001] [error] Uncaught Exception: ReferenceError: isDev is not defined
[2026-01-17 10:29:32.002] [error] Stack trace: at Object.<anonymous> (main.js:10:29)
```

### çª—å£äº‹ä»¶
```
[2026-01-17 10:29:33.001] [debug] Event: window resize (1200x800)
[2026-01-17 10:29:33.002] [debug] Event: window move (x:100, y:100)
[2026-01-17 10:29:33.003] [info] Window state saved successfully
```

### æ¸²æŸ“è¿›ç¨‹æ—¥å¿—
```
[2026-01-17 10:29:34.001] [info] Renderer[index.html:45]: App initialized
[2026-01-17 10:29:34.002] [warn] Renderer[index.html:67]: Platform API not ready
```

## æ—¥å¿—åˆ†æå·¥å…·

### ä½¿ç”¨æ–¹æ³•

```bash
# åˆ†ææœ€æ–°æ—¥å¿—
node scripts/analyze-logs.js

# åˆ†ææŒ‡å®šæ—¥å¿—æ–‡ä»¶
node scripts/analyze-logs.js /path/to/log/file.log
```

### åˆ†æå†…å®¹

1. **ç»Ÿè®¡ä¿¡æ¯**: æ€»è¡Œæ•°ã€å„çº§åˆ«æ—¥å¿—æ•°é‡
2. **é”™è¯¯è¯¦æƒ…**: æ‰€æœ‰é”™è¯¯åŠå…¶ä½ç½®
3. **è­¦å‘Šåˆ—è¡¨**: å‰10ä¸ªè­¦å‘Š
4. **ç”Ÿå‘½å‘¨æœŸäº‹ä»¶**: åº”ç”¨å¯åŠ¨ã€çª—å£åˆ›å»ºã€åº”ç”¨é€€å‡ºç­‰
5. **æ€§èƒ½æ•°æ®**: åŠ è½½æ—¶é—´ã€å“åº”æ—¶é—´ç­‰
6. **é—®é¢˜æ¨¡å¼**: é¢‘ç¹å‡ºç°çš„é”™è¯¯
7. **è¿è¡ŒçŠ¶æ€**: æ˜¯å¦æ­£å¸¸å¯åŠ¨å’Œé€€å‡º

### ç¤ºä¾‹è¾“å‡º

```
================================================================================
æ—¥å¿—åˆ†ææŠ¥å‘Š
================================================================================
æ—¥å¿—æ–‡ä»¶: ~/Library/Logs/SundaySchoolTime/main-2026-01-17.log
åˆ†ææ—¶é—´: 2026-01-17T10:30:00.000Z
================================================================================

ğŸ“Š æ—¥å¿—ç»Ÿè®¡:
   æ€»è¡Œæ•°: 245
   ğŸ”´ é”™è¯¯: 2
   ğŸŸ¡ è­¦å‘Š: 5
   ğŸ”µ ä¿¡æ¯: 138
   âšª è°ƒè¯•: 100

ğŸ”´ é”™è¯¯è¯¦æƒ…:
   è¡Œ 45: [2026-01-17 10:29:32.123] Uncaught Exception: ...
   è¡Œ 67: [2026-01-17 10:29:35.456] Failed to load resource: ...

ğŸŸ¡ è­¦å‘Šè¯¦æƒ…:
   è¡Œ 12: [2026-01-17 10:29:30.234] saveWindowState: window is null
   è¡Œ 89: [2026-01-17 10:29:36.789] Update check failed: network error

ğŸ”„ åº”ç”¨ç”Ÿå‘½å‘¨æœŸ:
   è¡Œ 1: [2026-01-17 10:29:30.000] Application Starting
   è¡Œ 56: [2026-01-17 10:29:34.123] Event: app ready
   è¡Œ 78: [2026-01-17 10:29:35.456] Event: window closed

âš¡ æ€§èƒ½æ•°æ®:
   è¡Œ 45: index.html loaded successfully in 123ms
   è¡Œ 67: Window ready to show (total: 456ms)

ğŸ” é—®é¢˜æ¨¡å¼åˆ†æ:
   âš ï¸  é¢‘ç¹å‡ºç°çš„é”™è¯¯:
      - "Failed to connect to update server..." (3 æ¬¡)

ğŸ“‹ è¿è¡ŒçŠ¶æ€:
   åº”ç”¨å¯åŠ¨: âœ… æ˜¯
   æ­£å¸¸é€€å‡º: âœ… æ˜¯

================================================================================
åˆ†æå®Œæˆ
================================================================================
```

## AI è°ƒè¯•æŒ‡å—

å½“é‡åˆ°é—®é¢˜æ—¶ï¼ŒæŒ‰ä»¥ä¸‹æ­¥éª¤ä½¿ç”¨æ—¥å¿—å®šä½ï¼š

### 1. è¿è¡Œæ—¥å¿—åˆ†æ
```bash
node scripts/analyze-logs.js
```

### 2. æŸ¥çœ‹é”™è¯¯è¯¦æƒ…
- å…³æ³¨ ğŸ”´ é”™è¯¯éƒ¨åˆ†
- æŸ¥çœ‹é”™è¯¯å †æ ˆè¿½è¸ª
- ç¡®è®¤é”™è¯¯å‘ç”Ÿçš„ä¸Šä¸‹æ–‡

### 3. æ£€æŸ¥ç”Ÿå‘½å‘¨æœŸ
- åº”ç”¨æ˜¯å¦æ­£å¸¸å¯åŠ¨ï¼Ÿ
- çª—å£æ˜¯å¦æˆåŠŸåˆ›å»ºï¼Ÿ
- æ˜¯å¦æ­£å¸¸é€€å‡ºï¼Ÿ

### 4. åˆ†ææ—¶é—´çº¿
- æŒ‰æ—¶é—´æˆ³è¿½è¸ªäº‹ä»¶é¡ºåº
- æŸ¥æ‰¾å¼‚å¸¸çš„æ—¶é—´é—´éš”
- å®šä½æ€§èƒ½ç“¶é¢ˆ

### 5. æŸ¥æ‰¾æ¨¡å¼
- æ˜¯å¦æœ‰é¢‘ç¹é‡å¤çš„é”™è¯¯ï¼Ÿ
- é”™è¯¯æ˜¯å¦åœ¨ç‰¹å®šæ“ä½œåå‡ºç°ï¼Ÿ
- è­¦å‘Šæ˜¯å¦å¯ä»¥å¿½ç•¥ï¼Ÿ

## æ·»åŠ è‡ªå®šä¹‰æ—¥å¿—

### åœ¨ä»£ç ä¸­æ·»åŠ æ—¥å¿—

```javascript
const log = require('electron-log');

// è°ƒè¯•ä¿¡æ¯
log.debug('Function called with params:', params);

// é‡è¦ä¿¡æ¯
log.info('User action completed successfully');

// è­¦å‘Š
log.warn('Deprecated feature used');

// é”™è¯¯ï¼ˆå¸¦å †æ ˆï¼‰
try {
  // ä»£ç 
} catch (error) {
  log.error('Operation failed:', error);
  log.error('Stack trace:', error.stack);
}
```

### æœ€ä½³å®è·µ

1. **ä½¿ç”¨åˆé€‚çš„çº§åˆ«**
   - `error`: å¿…é¡»ä¿®å¤çš„é”™è¯¯
   - `warn`: æ½œåœ¨é—®é¢˜
   - `info`: é‡è¦æ“ä½œ
   - `debug`: è¯¦ç»†æµç¨‹

2. **æä¾›ä¸Šä¸‹æ–‡**
   ```javascript
   log.info('User login:', { userId, timestamp, ip });
   ```

3. **è®°å½•å…³é”®å‚æ•°**
   ```javascript
   log.debug('Function params:', JSON.stringify(params, null, 2));
   ```

4. **åŒ…å«é”™è¯¯å †æ ˆ**
   ```javascript
   log.error('Error:', error.message);
   log.error('Stack:', error.stack);
   ```

5. **æ€§èƒ½è¿½è¸ª**
   ```javascript
   const start = Date.now();
   // æ“ä½œ
   const duration = Date.now() - start;
   log.info(`Operation completed in ${duration}ms`);
   ```

## æ•…éšœæ’æŸ¥æµç¨‹

1. **è¿è¡Œæ—¥å¿—åˆ†æ**: `node scripts/analyze-logs.js`
2. **æŸ¥çœ‹é”™è¯¯æ•°é‡**: æ˜¯å¦æœ‰é”™è¯¯ï¼Ÿ
3. **é˜…è¯»é”™è¯¯æ¶ˆæ¯**: é”™è¯¯è¯´æ˜ä»€ä¹ˆé—®é¢˜ï¼Ÿ
4. **æŸ¥çœ‹å †æ ˆè¿½è¸ª**: é”™è¯¯å‘ç”Ÿåœ¨å“ªé‡Œï¼Ÿ
5. **æ£€æŸ¥æ—¶é—´çº¿**: é”™è¯¯å‰å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ
6. **æœç´¢ç›¸å…³æ—¥å¿—**: ä½¿ç”¨ grep æŸ¥æ‰¾ç›¸å…³ä¸Šä¸‹æ–‡
7. **å¯¹æ¯”æ­£å¸¸æ—¥å¿—**: ä¸æ­£å¸¸è¿è¡Œçš„æ—¥å¿—å¯¹æ¯”

```bash
# æœç´¢ç‰¹å®šå…³é”®è¯
grep "error" ~/Library/Logs/SundaySchoolTime/main-2026-01-17.log

# æŸ¥çœ‹ç‰¹å®šæ—¶é—´æ®µ
grep "10:29:3" ~/Library/Logs/SundaySchoolTime/main-2026-01-17.log

# ç»Ÿè®¡é”™è¯¯æ•°é‡
grep -c "\[error\]" ~/Library/Logs/SundaySchoolTime/main-2026-01-17.log
```
